language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
install: npm install
before_script: echo 'Running unit tests'
script: npm test
before_deploy: echo 'All unit tests passed; Preparing to deploy to AWS'
deploy:
- provider: script
  skip_cleanup: true
  script: npm run deploy-development
  on:
    branch: development
- provider: script
  skip_cleanup: true
  script: npm run deploy-qa
  on:
    branch: qa
- provider: script
  skip_cleanup: true
  script: npm run deploy-production
  on:
    branch: master
after_deploy: echo 'Successfully deployed to AWS'
env:
  global:
    secure: XGOwUySOsvQrsnK+wl006CbVHLj6bxlBlyC/XYxz+XWt5i9Drvo/lF2p779s7BjwHflEdR9PUJ58Tfvas8x3XZzwWNdmjTeJnbxNTJma2Zngfr/nLK0lQE2gYXTXJ4WQw+tOtIlfeE9zkoW58iz0oEXnCfNmkq9uzcPd9k+lJYfeootCeUaJAk3nmdBytVS051NSmOFjMThQ0k0COtEaFmnxkQDKMCLuZTELFsp1xXuktNtLFo43fUJKKPPojikkanYRz2GGv3Ts29x+IaoZ2o7nExD67Utu680bL4N/5fvCFHqAaoy8tpo8+vbqm52/ENTWXedZ2iteA3m2hCKN4r7c0kMtM6OaRZ1ZuTIgYChVUVkxqTvmvCCxzim7x4yciavUtjE5GTiRNjEmVPYqDbTLgQ9ZD6RAEV0yorX7QPAlbqWjPxFIyyDj1GwzQfpkfTQRdS3oRHkRG6c+sjeYnC4n4v7uux61b8IKCPRv/EV4PMLvvNX8AVKAF+0vc3CrpJwSbMGA39XT5Kycj9m4k5Nf2HUdHF5oFIJhO3yNNl5Zxv9LHuypudd1rpRaDhy13pAq0cPoTD4LYSVfO8FEQP9lDGUQZXM/A7Kk52hCRnOvHWOCuqXMuLSMURaaBr7Ap6JrHmIHq/HKRFdTO/z7ccgFLDCE5E1W6XsN6R2XSm0=
