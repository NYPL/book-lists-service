language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
install: npm install
before_script: echo 'Running unit tests'
script: npm test
before_deploy: echo 'All unit tests passed; Preparing to deploy to AWS'
deploy:
- provider: script
  skip_cleanup: true
  script: npm run deploy-development
  on:
    branch: development
- provider: script
  skip_cleanup: true
  script: npm run deploy-qa
  on:
    branch: qa
- provider: script
  skip_cleanup: true
  script: npm run deploy-production
  on:
    branch: master
after_deploy: echo 'Successfully deployed to AWS'
env:
  global:
    secure: Y0xEHIy5iATt1Un1hlHEH4clo5PDqVPM1g1siYR5VyqZhNNKz+kWHCn184ZpSc6Z9UFycnL6cP1OeaRLOTIDFWdFXFEpZ7GszUx7hvol3SXg0nERR49c3QGwy8CiyHIdoyKP04fBulKSp75E4gN1pylZdCusOA9qXHzHbAjLUACfKmTGOPxezcZivQQ5vpSofeHPlpvjkZYfU5SFAbpgZ6BSG0tP7MPPquspkB91/JgUzuJ5W9BmzELSJ34NMj4m16ieqIDtUb+9nERkPVQqWx9j8PS6/FFi2vVwLjm2UTZfkDGx9qKvojMjfnk/RuvVCLqx7Fs6AKCNswlBcEnfGlgtk25LkmzdGglEuhhiqr56NG4KbuffiVDGuy84P6jHly7LeguQPX0gjbEeMYAcnatEb2+OZL3tq/ywKfMM2YYnHRyMei4UvyW7TAIS/5O+kstqgNpSXdLifRAUrLF2/YDKqCvCuxMN9F/2uhzXWLwM8Wvw58bB3ydowW0GZUD9SB7MZZjfgH7v+TWpK7I/vEMQQ9CCNrHGdJ+2vhKxqdGUGC2bm/1pRhfufgSu//lc0tAnvz9pdpurcjwJaRhYjlAsGfwu18VLEo6PQu11F6334MgeNk0LFn7agUOYKfpiFlBPduIDkyMOnDIHihBxRSTIgnFCq6VL7Gl+rgzNrrg=
